!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@covalent/markdown"),require("@angular/material/button"),require("@angular/material/tooltip"),require("@angular/material/list"),require("@angular/material/icon"),require("@angular/material/progress-bar"),require("@covalent/flavored-markdown"),require("@angular/cdk/drag-drop"),require("@angular/material/toolbar"),require("@angular/core"),require("@angular/material/dialog"),require("@angular/cdk/overlay")):"function"==typeof define&&define.amd?define("@covalent/experimental/help",["exports","@angular/common","@covalent/markdown","@angular/material/button","@angular/material/tooltip","@angular/material/list","@angular/material/icon","@angular/material/progress-bar","@covalent/flavored-markdown","@angular/cdk/drag-drop","@angular/material/toolbar","@angular/core","@angular/material/dialog","@angular/cdk/overlay"],t):t((e.covalent=e.covalent||{},e.covalent.experimental=e.covalent.experimental||{},e.covalent.experimental.help={}),e.ng.common,e.markdown,e.ng.material.button,e.ng.material.tooltip,e.ng.material.list,e.ng.material.icon,e.ng.material["progress-bar"],e.flavoredMarkdown,e.ng.cdk["drag-drop"],e.ng.material.toolbar,e.ng.core,e.ng.material.dialog,e.ng.cdk.overlay)}(this,function(e,t,o,n,r,a,i,l,s,c,u,d,h,p){"use strict";var m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function g(r,o){var a,i,l,e,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function n(e){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,i&&(l=2&e[0]?i["return"]:e[0]?i["throw"]||((l=i["return"])&&l.call(i),0):i.next)&&!(l=l.call(i,e[1])).done)return l;switch(i=0,l&&(e=[2&e[0],l.value]),e[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=o.call(r,s)}catch(t){e=[6,t],i=0}finally{a=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(n=a["return"])&&n.call(a)}finally{if(o)throw o.error}}return i}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(e){return!o.isAnchorLink(e)&&e.pathname.endsWith(".md")}var w=(Object.defineProperty(k.prototype,"showGoBackButton",{get:function(){return 0<this.historyStack.length},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"showMenu",{get:function(){return this.currentMenuItems&&0<this.currentMenuItems.length},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"showTdMarkdownLoader",{get:function(){return!!this.currentMarkdownItem&&!!this.currentMarkdownItem.url&&!this.showTdMarkdown},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"showTdMarkdown",{get:function(){return!!this.currentMarkdownItem&&!!this.currentMarkdownItem.markdownString},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"url",{get:function(){return this.currentMarkdownItem?this.currentMarkdownItem.url:undefined},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"httpOptions",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.httpOptions},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"markdownString",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.markdownString},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"anchor",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.anchor},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"showEmptyState",{get:function(){return!this.items||this.items.length<1},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"goHomeLabel",{get:function(){return this.labels&&this.labels.goHome||"Go home"},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"goBackLabel",{get:function(){return this.labels&&this.labels.goBack||"Go back"},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"emptyStateLabel",{get:function(){return this.labels&&this.labels.emptyState||"No item(s) to display"},enumerable:!0,configurable:!0}),k.prototype.ngOnChanges=function(e){e.items&&this.reset()},k.prototype.ngOnDestroy=function(){this.removeLinkListeners()},k.prototype.reset=function(){this.removeLinkListeners(),!this.items||1!==this.items.length||this.items[0].children&&0!==this.items[0].children.length?(this.currentMenuItems=this.items,this.currentMarkdownItem=undefined):(this.currentMenuItems=[],this.currentMarkdownItem=this.items[0]),this.historyStack=[]},k.prototype.handleItemSelected=function(e){0===this.currentMenuItems.length?this.historyStack=b(this.historyStack,[[this.currentMarkdownItem]]):this.historyStack=b(this.historyStack,[this.currentMenuItems]),!e.children||1!==e.children.length||e.children[0].children&&0!==e.children[0].children.length?e.children&&0<e.children.length?this.currentMenuItems=e.children:(this.currentMenuItems=[],this.currentMarkdownItem=e):(this.currentMenuItems=[],this.currentMarkdownItem=e.children[0])},k.prototype.goBack=function(){if(0<this.historyStack.length){var e=this.historyStack[this.historyStack.length-1];1!==e.length||e[0].children&&0!==e[0].children.length?(this.currentMenuItems=e,this.currentMarkdownItem=undefined):(this.currentMenuItems=[],this.currentMarkdownItem=e[0]),this.historyStack=this.historyStack.slice(0,-1)}},k.prototype.getTitle=function(e){return e.title||o.removeLeadingHash(e.anchor)||function r(e){if(e){var t=new URL(e);if(t.hash)return o.removeLeadingHash(t.hash);var n=t.pathname.split("/");return n[n.length-1].replace(/\.[^/.]+$/,"")}return undefined}(e.url)||function n(e){if(e){var t=e.split(/[\r\n]+/).find(function(e){return!!e});return o.removeLeadingHash(t).trim()}return undefined}(e.markdownString)},k.prototype.handleContentReady=function(){this.removeLinkListeners(),this.handleLinkClickBound=this.handleLinkClick.bind(this),this.attachLinkListeners()},k.prototype.attachLinkListeners=function(){var t=this;Array.from(this._elementRef.nativeElement.querySelectorAll("a[href]")).filter(function(e){return y(e)}).forEach(function(e){return e.addEventListener("click",t.handleLinkClickBound)})},k.prototype.removeLinkListeners=function(){var t=this;Array.from(this._elementRef.nativeElement.querySelectorAll("a[href]")).filter(function(e){return y(e)}).forEach(function(e){return e.removeEventListener("click",t.handleLinkClickBound)})},k.prototype.handleLinkClick=function(o){return function e(t,i,l,s){return new(l=l||Promise)(function(e,n){function r(e){try{a(s.next(e))}catch(t){n(t)}}function o(e){try{a(s["throw"](e))}catch(t){n(t)}}function a(t){t.done?e(t.value):new l(function(e){e(t.value)}).then(r,o)}a((s=s.apply(t,i||[])).next())})}(this,void 0,void 0,function(){var t,n,r;return g(this,function(e){switch(e.label){case 0:o.preventDefault(),t=o.target,n=new URL(t.href),this.loading=!0,e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,this._markdownUrlLoaderService.load(n.href)];case 2:return r=e.sent(),this.handleItemSelected({markdownString:r,url:n.href}),[3,5];case 3:return e.sent(),window.open(n.href,"_blank").focus(),[3,5];case 4:return this.loading=!1,[7];case 5:return[2]}})})},k.decorators=[{type:d.Component,args:[{selector:"td-help",template:'<ng-container *ngIf="!showEmptyState">\n<button\n  mat-icon-button\n  [matTooltip]="goHomeLabel"\n  (click)="reset()"\n>\n  <mat-icon\n    [attr.aria-label]="goHomeLabel"\n  >\n    home\n  </mat-icon>\n</button>\n\n<button\n  *ngIf="showGoBackButton"\n  mat-icon-button\n  [matTooltip]="goBackLabel"\n  (click)="goBack()"\n>\n  <mat-icon\n    [attr.aria-label]="goBackLabel"\n  >\n    arrow_back\n  </mat-icon>\n</button>\n\n<mat-action-list\n  *ngIf="showMenu"\n>\n  <button\n    *ngFor="let item of currentMenuItems"\n    (click)="handleItemSelected(item)"\n    mat-list-item\n    [matTooltip]="getTitle(item)"\n    matTooltipPosition="before"\n    matTooltipShowDelay="500"\n  >\n    <mat-icon\n      matListIcon\n    >\n      subject\n    </mat-icon>\n    <span class="text-truncate">\n      {{ getTitle(item) }}\n    </span>\n  </button>\n</mat-action-list>\n\n<mat-progress-bar\n  *ngIf="loading"\n  mode="indeterminate"\n  color="accent"\n  class="sticky"\n>\n</mat-progress-bar>\n\n<td-flavored-markdown-loader\n  *ngIf="showTdMarkdownLoader"\n  [url]="url"\n  [httpOptions]="httpOptions"\n  [anchor]="anchor"\n  class="pad scroll-md"\n  (contentReady)="handleContentReady()"\n>\n</td-flavored-markdown-loader>\n\n<td-flavored-markdown\n  *ngIf="showTdMarkdown"\n  [content]="markdownString"\n  [hostedUrl]="url"\n  [anchor]="anchor"\n  class="pad scroll-md"\n  (contentReady)="handleContentReady()"\n>\n</td-flavored-markdown>\n</ng-container>\n\n<div\n  *ngIf="showEmptyState"\n  layout="column"\n  layout-align="center center"\n  class="tc-grey-500 mat-typography pad-lg"\n>\n  <mat-icon matListAvatar class="text-super push-bottom">subject</mat-icon>\n  <h2>{{ emptyStateLabel }}</h2>\n</div>\n',styles:[":host{display:block;position:relative;height:inherit}.scroll-md{position:absolute;top:40px;bottom:0;right:0;left:0;overflow-y:auto}.sticky{position:absolute;top:0}"]}]}],k.ctorParameters=function(){return[{type:d.ElementRef},{type:o.MarkdownLoaderService}]},k.propDecorators={items:[{type:d.Input}],labels:[{type:d.Input}]},k);function k(e,t){this._elementRef=e,this._markdownUrlLoaderService=t,this.historyStack=[],this.currentMenuItems=[],this.loading=!1}var v=(Object.defineProperty(M.prototype,"height",{get:function(){return 475},enumerable:!0,configurable:!0}),M.decorators=[{type:d.Component,args:[{selector:"td-help-window",template:'<div\n  *ngIf="draggable"\n\n  cdkDrag\n  cdkDragRootElement=".cdk-overlay-pane"\n  cdkDragBoundary=".cdk-overlay-container"\n>\n  <td-help-window-toolbar\n    cdkDragHandle\n\n    class="td-draggable-help-window-toolbar"\n\n    [labels]="labels"\n\n    (closed)="closed.emit()"\n  >\n</td-help-window-toolbar>\n\n  <td-help\n    [items]="items"\n    [labels]="labels"\n    [style.height.px]="height"\n  >\n  </td-help>\n</div>\n\n\n<div\n  *ngIf="!draggable"\n>\n  <td-help-window-toolbar\n    [labels]="labels"\n\n    (closed)="closed.emit()"\n  >\n</td-help-window-toolbar>\n\n  <td-help\n    [style.height.px]="height"\n    [items]="items"\n    [labels]="labels"\n  >\n  </td-help>\n</div>\n',styles:[":host{display:inline-block}td-help{display:block;width:360px;max-width:100vw;max-height:100vh;overflow-y:auto}.td-draggable-help-window-toolbar{cursor:move}"]}]}],M.propDecorators={items:[{type:d.Input}],draggable:[{type:d.Input}],labels:[{type:d.Input}],closed:[{type:d.Output}]},M);function M(){this.draggable=!1,this.closed=new d.EventEmitter}var I=(L.prototype.handleClosed=function(){this.dialogRef.close()},L.decorators=[{type:d.Component,args:[{selector:"app-draggable-help-window-dialog",template:'<td-help-window\n  [items]="data.items"\n  [labels]="data.labels"\n  [draggable]="true"\n\n  (closed)="handleClosed()"\n>\n</td-help-window>\n',styles:["::ng-deep.draggable-dialog-wrapper>.mat-dialog-container{padding:0}"]}]}],L.ctorParameters=function(){return[{type:undefined,decorators:[{type:d.Inject,args:[h.MAT_DIALOG_DATA]}]},{type:h.MatDialogRef}]},L);function L(e,t){this.data=e,this.dialogRef=t}var S=(Object.defineProperty(O.prototype,"helpLabel",{get:function(){return this.labels&&this.labels.help||"Help"},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"closeLabel",{get:function(){return this.labels&&this.labels.close||"Close"},enumerable:!0,configurable:!0}),O.decorators=[{type:d.Component,args:[{selector:"td-help-window-toolbar",template:'<mat-toolbar\n  color="primary"\n>\n  <mat-toolbar-row>\n    <div\n      layout="row"\n      layout-align="start center"\n      flex\n    >\n      <span\n        class="mat-title push-bottom-none"\n        flex\n      >\n        {{ helpLabel }}\n      </span>\n      \x3c!-- TODO: Resizing a drag-and-drop element was not working so removed minimize/maximize for now--\x3e\n      <button\n        mat-icon-button\n        matTooltip="Close"\n        (click)="closed.emit()"\n      >\n        <mat-icon\n          [attr.aria-label]="closeLabel"\n        >\n          close\n        </mat-icon>\n      </button>\n    </div>\n  </mat-toolbar-row>\n</mat-toolbar>\n',styles:[""]}]}],O.propDecorators={labels:[{type:d.Input}],closed:[{type:d.Output}]},O);function O(){this.closed=new d.EventEmitter}var j=(x.decorators=[{type:d.NgModule,args:[{imports:[t.CommonModule,n.MatButtonModule,r.MatTooltipModule,a.MatListModule,i.MatIconModule,h.MatDialogModule,l.MatProgressBarModule,c.DragDropModule,u.MatToolbarModule,s.CovalentFlavoredMarkdownModule],declarations:[w,v,S,I],exports:[w,v,I],entryComponents:[I]}]}],x);function x(){}var C=(D.prototype.open=function(e,t,n){var r=this._dialog.open(I,m({hasBackdrop:!1,closeOnNavigation:!0,panelClass:"draggable-dialog-wrapper",position:{bottom:"0",right:"0"},scrollStrategy:this.scrollStrategy},t));return r.componentInstance.data={items:e,labels:n},r},D.decorators=[{type:d.Injectable,args:[{providedIn:j}]}],D.ctorParameters=function(){return[{type:h.MatDialog},{type:p.Overlay}]},D.ngInjectableDef=d.defineInjectable({factory:function(){return new D(d.inject(h.MatDialog),d.inject(p.Overlay))},token:D,providedIn:j}),D);function D(e,t){this._dialog=e,this.scrollStrategy=t.scrollStrategies.noop()}e.CovalentHelpModule=j,e.HelpComponent=w,e.HelpWindowComponent=v,e.DraggableHelpWindowDialogComponent=I,e.DraggableHelpWindowDialogService=C,e.ɵa=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=covalent-experimental-help.umd.min.js.map