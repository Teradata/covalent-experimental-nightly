!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@covalent/markdown"),require("@angular/material/button"),require("@angular/material/tooltip"),require("@angular/material/list"),require("@angular/material/icon"),require("@angular/material/dialog"),require("@angular/material/progress-bar"),require("@covalent/flavored-markdown"),require("@angular/cdk/drag-drop"),require("@angular/material/toolbar"),require("@angular/cdk/overlay"),require("@covalent/core/dialogs")):"function"==typeof define&&define.amd?define("@covalent/experimental/help",["exports","@angular/core","@angular/common","@covalent/markdown","@angular/material/button","@angular/material/tooltip","@angular/material/list","@angular/material/icon","@angular/material/dialog","@angular/material/progress-bar","@covalent/flavored-markdown","@angular/cdk/drag-drop","@angular/material/toolbar","@angular/cdk/overlay","@covalent/core/dialogs"],t):t(((e=e||self).covalent=e.covalent||{},e.covalent.experimental=e.covalent.experimental||{},e.covalent.experimental.help={}),e.ng.core,e.ng.common,e.markdown,e.ng.material.button,e.ng.material.tooltip,e.ng.material.list,e.ng.material.icon,e.ng.material.dialog,e.ng.material["progress-bar"],e.flavoredMarkdown,e.ng.cdk["drag-drop"],e.ng.material.toolbar,e.ng.cdk.overlay,e.dialogs)}(this,function(e,t,n,r,o,a,i,l,c,s,u,d,h,p,m){"use strict";var g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function f(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r["return"]:a[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(l){a=[6,l],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(n=a["return"])&&n.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function k(e){return!r.isAnchorLink(e)&&e.pathname.endsWith(".md")}var w=function(){function e(e,t){this._elementRef=e,this._markdownUrlLoaderService=t,this.historyStack=[],this.currentMenuItems=[],this.loading=!1}return Object.defineProperty(e.prototype,"showGoBackButton",{get:function(){return this.historyStack.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMenu",{get:function(){return this.currentMenuItems&&this.currentMenuItems.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTdMarkdownLoader",{get:function(){return!!this.currentMarkdownItem&&!!this.currentMarkdownItem.url&&!this.showTdMarkdown},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTdMarkdown",{get:function(){return!!this.currentMarkdownItem&&!!this.currentMarkdownItem.markdownString},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.currentMarkdownItem?this.currentMarkdownItem.url:undefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpOptions",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.httpOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markdownString",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.markdownString},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){if(this.currentMarkdownItem)return this.currentMarkdownItem.anchor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEmptyState",{get:function(){return!this.items||this.items.length<1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"goHomeLabel",{get:function(){return this.labels&&this.labels.goHome||"Go home"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"goBackLabel",{get:function(){return this.labels&&this.labels.goBack||"Go back"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyStateLabel",{get:function(){return this.labels&&this.labels.emptyState||"No item(s) to display"},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){e.items&&this.reset()},e.prototype.ngOnDestroy=function(){this.removeLinkListeners()},e.prototype.reset=function(){this.removeLinkListeners(),!this.items||1!==this.items.length||this.items[0].children&&0!==this.items[0].children.length?(this.currentMenuItems=this.items,this.currentMarkdownItem=undefined):(this.currentMenuItems=[],this.currentMarkdownItem=this.items[0]),this.historyStack=[]},e.prototype.handleItemSelected=function(e){0===this.currentMenuItems.length?this.historyStack=y(this.historyStack,[[this.currentMarkdownItem]]):this.historyStack=y(this.historyStack,[this.currentMenuItems]),!e.children||1!==e.children.length||e.children[0].children&&0!==e.children[0].children.length?e.children&&e.children.length>0?this.currentMenuItems=e.children:(this.currentMenuItems=[],this.currentMarkdownItem=e):(this.currentMenuItems=[],this.currentMarkdownItem=e.children[0])},e.prototype.goBack=function(){if(this.historyStack.length>0){var e=this.historyStack[this.historyStack.length-1];1!==e.length||e[0].children&&0!==e[0].children.length?(this.currentMenuItems=e,this.currentMarkdownItem=undefined):(this.currentMenuItems=[],this.currentMarkdownItem=e[0]),this.historyStack=this.historyStack.slice(0,-1)}},e.prototype.getTitle=function(e){return e.title||r.removeLeadingHash(e.anchor)||function(e){if(e){var t=new URL(e);if(t.hash)return r.removeLeadingHash(t.hash);var n=t.pathname.split("/");return n[n.length-1].replace(/\.[^\/.]+$/,"")}return undefined}(e.url)||function(e){if(e){var t=e.split(/[\r\n]+/).find(function(e){return!!e});return r.removeLeadingHash(t).trim()}return undefined}(e.markdownString)},e.prototype.handleContentReady=function(){this.removeLinkListeners(),this.handleLinkClickBound=this.handleLinkClick.bind(this),this.attachLinkListeners()},e.prototype.attachLinkListeners=function(){var e=this;Array.from(this._elementRef.nativeElement.querySelectorAll("a[href]")).filter(function(e){return k(e)}).forEach(function(t){return t.addEventListener("click",e.handleLinkClickBound)})},e.prototype.removeLinkListeners=function(){var e=this;Array.from(this._elementRef.nativeElement.querySelectorAll("a[href]")).filter(function(e){return k(e)}).forEach(function(t){return t.removeEventListener("click",e.handleLinkClickBound)})},e.prototype.handleLinkClick=function(e){return t=this,n=void 0,o=function(){var t,n,r;return f(this,function(o){switch(o.label){case 0:e.preventDefault(),t=e.target,n=new URL(t.href),this.loading=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this._markdownUrlLoaderService.load(n.href)];case 2:return r=o.sent(),this.handleItemSelected({markdownString:r,url:n.href}),[3,5];case 3:return o.sent(),window.open(n.href,"_blank").focus(),[3,5];case 4:return this.loading=!1,[7];case 5:return[2]}})},new((r=void 0)||(r=Promise))(function(e,a){function i(e){try{c(o.next(e))}catch(t){a(t)}}function l(e){try{c(o["throw"](e))}catch(t){a(t)}}function c(t){t.done?e(t.value):new r(function(e){e(t.value)}).then(i,l)}c((o=o.apply(t,n||[])).next())});var t,n,r,o},e.decorators=[{type:t.Component,args:[{selector:"td-help",template:'<ng-container *ngIf="!showEmptyState">\n  <button mat-icon-button [matTooltip]="goHomeLabel" (click)="reset()">\n    <mat-icon [attr.aria-label]="goHomeLabel">\n      home\n    </mat-icon>\n  </button>\n\n  <button *ngIf="showGoBackButton" mat-icon-button [matTooltip]="goBackLabel" (click)="goBack()">\n    <mat-icon [attr.aria-label]="goBackLabel">\n      arrow_back\n    </mat-icon>\n  </button>\n\n  <mat-action-list *ngIf="showMenu">\n    <button\n      *ngFor="let item of currentMenuItems"\n      (click)="handleItemSelected(item)"\n      mat-list-item\n      [matTooltip]="getTitle(item)"\n      matTooltipPosition="before"\n      matTooltipShowDelay="500"\n    >\n      <mat-icon matListIcon>\n        subject\n      </mat-icon>\n      <span class="text-truncate">\n        {{ getTitle(item) }}\n      </span>\n    </button>\n  </mat-action-list>\n\n  <mat-progress-bar *ngIf="loading" mode="indeterminate" color="accent" class="sticky"> </mat-progress-bar>\n\n  <td-flavored-markdown-loader\n    *ngIf="showTdMarkdownLoader"\n    [url]="url"\n    [httpOptions]="httpOptions"\n    [anchor]="anchor"\n    class="pad scroll-md"\n    (contentReady)="handleContentReady()"\n  >\n  </td-flavored-markdown-loader>\n\n  <td-flavored-markdown\n    *ngIf="showTdMarkdown"\n    [content]="markdownString"\n    [hostedUrl]="url"\n    [anchor]="anchor"\n    class="pad scroll-md"\n    (contentReady)="handleContentReady()"\n  >\n  </td-flavored-markdown>\n</ng-container>\n\n<div *ngIf="showEmptyState" layout="column" layout-align="center center" class="tc-grey-500 mat-typography pad-lg">\n  <mat-icon matListAvatar class="text-super push-bottom">subject</mat-icon>\n  <h2>{{ emptyStateLabel }}</h2>\n</div>\n',styles:[":host{display:block;position:relative;height:inherit}.scroll-md{position:absolute;top:40px;bottom:0;right:0;left:0;overflow-y:auto}.sticky{position:absolute;top:0}"]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:r.MarkdownLoaderService}]},e.propDecorators={items:[{type:t.Input}],labels:[{type:t.Input}]},e}(),v=function(){function e(){this.draggable=!1,this.toolbarColor="primary",this.closed=new t.EventEmitter}return Object.defineProperty(e.prototype,"height",{get:function(){return 475},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Component,args:[{selector:"td-help-window",template:'<div>\n  <td-help-window-toolbar\n    class="td-draggable-help-window-toolbar"\n    [labels]="labels"\n    [toolbarColor]="toolbarColor"\n    (closed)="closed.emit()"\n  >\n  </td-help-window-toolbar>\n\n  <td-help [items]="items" [labels]="labels" [style.height.px]="height"> </td-help>\n</div>\n',styles:[":host{display:inline-block}td-help{display:block;width:360px;max-width:100vw;max-height:100vh;overflow-y:auto}.td-draggable-help-window-toolbar{cursor:move}::ng-deep.draggable-dialog-wrapper>.mat-dialog-container{padding:0}"]}]}],e.propDecorators={items:[{type:t.Input}],draggable:[{type:t.Input}],labels:[{type:t.Input}],toolbarColor:[{type:t.Input}],closed:[{type:t.Output}]},e}(),M=function(){function e(){this.toolbarColor="primary",this.closed=new t.EventEmitter}return Object.defineProperty(e.prototype,"helpLabel",{get:function(){return this.labels&&this.labels.help||"Help"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeLabel",{get:function(){return this.labels&&this.labels.close||"Close"},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Component,args:[{selector:"td-help-window-toolbar",template:'<mat-toolbar [color]="toolbarColor">\n  <mat-toolbar-row>\n    <div layout="row" layout-align="start center" flex>\n      <span class="mat-title push-bottom-none" flex>\n        {{ helpLabel }}\n      </span>\n      \x3c!-- TODO: Resizing a drag-and-drop element was not working so removed minimize/maximize for now--\x3e\n      <button mat-icon-button matTooltip="Close" (click)="closed.emit()">\n        <mat-icon [attr.aria-label]="closeLabel">\n          close\n        </mat-icon>\n      </button>\n    </div>\n  </mat-toolbar-row>\n</mat-toolbar>\n',styles:[""]}]}],e.propDecorators={labels:[{type:t.Input}],toolbarColor:[{type:t.Input}],closed:[{type:t.Output}]},e}(),I=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,o.MatButtonModule,a.MatTooltipModule,i.MatListModule,l.MatIconModule,c.MatDialogModule,s.MatProgressBarModule,d.DragDropModule,h.MatToolbarModule,u.CovalentFlavoredMarkdownModule],declarations:[w,v,M],exports:[w,v],entryComponents:[v]}]}],e}(),L=function(){function e(e,t){this._overlay=e,this._tdDialogService=t}return e.prototype.open=function(e){var t=this._tdDialogService.openDraggable(v,g({hasBackdrop:!1,closeOnNavigation:!0,panelClass:"draggable-dialog-wrapper",position:{bottom:"0",right:"0"},scrollStrategy:this._overlay.scrollStrategies.noop()},e.dialogConfig),[".td-draggable-help-window-toolbar"]);return t.componentInstance.items=e.items,t.componentInstance.labels=e.labels,t.componentInstance.toolbarColor="toolbarColor"in e?e.toolbarColor:"primary",t.componentInstance.closed.subscribe(function(){return t.close()}),t},e.decorators=[{type:t.Injectable,args:[{providedIn:I}]}],e.ctorParameters=function(){return[{type:p.Overlay},{type:m.TdDialogService}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(p.Overlay),t.ɵɵinject(m.TdDialogService))},token:e,providedIn:I}),e}();e.CovalentHelpModule=I,e.DraggableHelpWindowDialogService=L,e.HelpComponent=w,e.HelpWindowComponent=v,e.ɵa=M,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=covalent-experimental-help.umd.min.js.map